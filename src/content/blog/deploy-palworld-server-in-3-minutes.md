---
title: 【3分钟开服】幻兽帕鲁服务器一键部署保姆教程（持续更新）
author: 帕鲁
pubDatetime: 2024-01-24T03:42:51Z
modDatetime: 2024-01-26T01:22:47.400Z
slug: deploy-palworld-server-in-3-minutes
featured: true
draft: false
tags:
  - 教程
  - 服务器
description:
  "想要部署属于自己的幻兽帕鲁服务器，您首先需要拥有一台服务器，服务器是幻兽帕鲁运行的基础。使用云服务器搭建幻兽帕鲁服务器，可以让您和朋友在一个相对独立、稳定且私密的空间中进行游戏，确保获得更加畅快的游戏体验。"
---

想要部署属于自己的幻兽帕鲁服务器，您首先需要拥有一台服务器，服务器是幻兽帕鲁运行的基础。

有了服务器之后，可以通过两种方式实现一键部署幻兽帕鲁服务器（Windows、Linux均支持）：

1. **极简一键部署**：使用腾讯云自动化助手完成一键部署。操作简单，无需登录服务器，仅需点击鼠标即可完成。
2. **普通一键部署**：通过运行一键部署脚本完成部署。需要登录服务器并运行命令行。

## 极简一键部署（使用自动化助手）

1. 在轻量应用服务器控制台，选中对应服务器，单击进入实例详情页，找到【执行命令】页签，即可使用自动化助手的【执行命令】功能。

2. 点击【执行命令】。

3. 在执行命令的弹窗中，选择【公共命令】，并根据服务器操作系统的类型，下拉选择需要执行的命令。

    * 如果您需要在 Windows 服务器内一键部署幻兽帕鲁，那么需要选择命令“安装幻兽帕鲁游戏服务器-Windows系统”，并单击弹窗下方的【执行命令】按钮。

    * 如果您需要在 Linux 服务器内一键部署幻兽帕鲁，则需要选择命令“安装幻兽帕鲁游戏服务器-Linux系统”，并单击弹窗下方的【执行命令】按钮。


4. 等待命令执行成功（约3-5分钟），即可完成开服，启动幻兽帕鲁服务器。

接下来您可以直接进入后续的防火墙配置、登录游戏和进阶指南步骤，完成后续的操作。

## 普通一键部署（使用一键部署脚本）

如果您希望自己登录服务器执行安装操作，可以使用在登录服务器后使用一键部署脚本进行开服。以下提供 Windows 和 Linux 两种不同操作系统的服务器一键部署方法。

### Windows 服务器一键部署

#### 前置知识：PowerShell

Windows 的一键部署需要借助 PowerShell 来完成。PowerShell 是一种任务自动化和配置管理框架，它提供了一个命令行 Shell 和脚本语言，用于管理和控制Windows操作系统和相关应用程序。

那么要如何找到 PowerShell？方法如下：

第一种：点击 Windows 开始按钮，然后在搜索框中输入"PowerShell"。你应该能够看到"Windows PowerShell"或"PowerShell"的搜索结果。点击该结果即可打开PowerShell。

第二种：使用运行对话框。按下Win + R键组合，打开运行对话框。在对话框中输入"powershell"，然后点击"确定"按钮即可打开PowerShell。


#### 一键部署操作步骤

一键部署的方式适用于想要快速上手幻兽帕鲁服务器的开发者，仅需运行一行命令即可完成部署。

我们参考官方教程，为您封装好了一键部署幻兽帕鲁的脚本，并且上传到云端，您仅需要登录服务器，然后在 PowerShell 中运行如下命令，即可完成幻兽帕鲁的部署。

```shell
iex (irm ' https://pal-server-1251810746.cos.accelerate.myqcloud.com/pal-server/Windows/install.ps1 ')
```

⚠️注意：如果您使用中国内地地域的服务器运行一键部署脚本，则有可能因为网络原因导致脚本运行失败，建议您多次重试或换个时间段再次部署。此处的原因主要是安装过程中需要请求Steam的服务器，网络状况不稳定。

### Linux 服务器一键部署

有别于 Windows 的部署教程，Linux 的部署操作需要通过命令行来完成，如果您不熟悉 Linux 的相关操作，建议您使用 Windows 操作系统进行部署。

我们参考官方教程，为您封装好了一键部署幻兽帕鲁的脚本，并且上传到云端，您仅需要登录服务器，并运行如下命令，即可完成幻兽帕鲁的部署。

```shell
wget -O - https://pal-server-1251810746.cos.accelerate.myqcloud.com/pal-server/Ubuntu/install.sh|sh
```

⚠️注意：如果您使用中国内地地域的服务器运行一键部署脚本，则有可能因为网络原因导致脚本运行失败，建议您多次重试或换个时间段再次部署。此处的原因主要是安装过程中需要请求Steam的服务器，网络状况不稳定。

一键部署脚本执行成功后，会在服务器中创建一个名为pal-server的服务，您可以使用如下命令检查服务是否正常启动，如出现图示的效果，则证明服务器已经部署成功。

```shell
sudo systemctl status pal-server
```

如果您后续想管理该服务，可以参考以下命令来进行：

```shell
# 启动幻兽帕鲁的服务
sudo systemctl start pal-server
# 重启幻兽帕鲁的服务
sudo systemctl restart pal-server
# 关闭幻兽帕鲁的服务
sudo systemctl stop pal-server
# 查询幻兽帕鲁服务的状态
sudo systemctl status pal-server
```

至此，您可以继续前往防火墙配置、登录游戏。

## 防火墙配置

幻兽帕鲁默认使用 8211 端口进行通信，在登录之前您需要首先放通实例防火墙 8211 端口。

1. 登录腾讯云轻量应用服务器控制台，点击实例卡片进入详情页。
2. 在实例详情页单击“防火墙”页签，进入防火墙配置页面
3. 单击“添加规则”按钮，依次添加如下规则：

添加成功后的效果如下图：


接下来，您就可以参考接下来的教程，通过客户端来尝试登录您部署的幻兽帕鲁服务器。

1. 打开 Steam 客户端，并登录您的 Steam 账号。
2. 在“库”中找到幻兽帕鲁，并点击【开始游戏】。
3. 在游戏菜单选择【加入多人游戏（专用服务器）】。

如果可以进入游戏，那么您就成功搭建了幻兽帕鲁专属服务器，可以让其他玩家输入您已部署服务器的公网IP地址+端口（8211），进入服务器畅快联机开玩。

提示：您可以前往腾讯云轻量应用服务器控制台查看游戏服务器的公网IP。在输入服务器的连接地址时，如您的服务器公网IP展示为：(公)175.xxx.xx.138，则您需要在输入链接时填入：175.xxx.xx.138:8211


## 进阶指南：配置游戏参数（可选）

建议您通过本文的一键部署教程幻兽帕鲁。其他部署方式可能在配置文件的路径上会有不同。

### Windows 操作系统

复制幻兽帕鲁默认配置文件

Windows操作系统的默认配置文件存放在以下目录中：

```bash
C:\Program Files\PalServer\steam\steamapps\common\PalServer\DefaultPalWorldSettings.ini
```

如您的幻兽帕鲁部署路径不为 `C:\Program Files\PalServer`，推荐您直接使用文件名 `DefaultPalWorldSettings.ini`，在 Windows 的文件夹内进行搜索。

2、选中该文件，并将文件复制到 `WindowsServer` 文件夹中，路径如下：

```bash
C:\Program Files\PalServer\steam\steamapps\common\PalServer\Pal\Saved\Config\WindowsServer
```

如果您无法在上述路径下找到 `WindowsServer` 文件夹，那么依然推荐您进行搜索。


复制该文件至WindowsServer目录下：


粘贴完成之后，删除原有的 `PalWorldSettings.ini` 文件，并将刚刚复制的文件名修改为 `PalWorldSettings.ini`。

默认情况下，`PalWorldSettings.ini`` 文件是空的，手动配置的门槛很高，因此我们推荐在默认配置文件的基础上进行修改。

### Linux 操作系统

1、使用如下命令，为配置文件增加权限，避免后续步骤中由于权限问题导致无法编辑。

```shell
sudo chmod 777 /home/steam/Steam/steamapps/common/PalServer/Pal/Saved/Config/LinuxServer/PalWorldSettings.ini
```

2、使用如下命令，将默认配置文件复制到幻兽帕鲁下的 `LinuxServer` 目录中：

默认情况下，`PalWorldSettings.ini` 文件是空的，手动配置的门槛很高，因此我们推荐在默认配置文件的基础上进行修改。

```shell
sudo cp /home/steam/Steam/steamapps/common/PalServer/DefaultPalWorldSettings.ini /home/steam/Steam/steamapps/common/PalServer/Pal/Saved/Config/LinuxServer/PalWorldSettings.ini
```

3、使用如下命令打开游戏参数的配置文件：`PalWorldSettings.ini`。

```shell
sudo vim /home/steam/Steam/steamapps/common/PalServer/Pal/Saved/Config/LinuxServer/PalWorldSettings.ini
```

按下 `i` 进入编辑模式，将光标移动到文件的末尾，即可开始写入配置。进入编辑模式的效果如下图所示：


4、编辑完成后，按下 `Esc` 键退出编辑模式，并输入 `:wq` 并按下回车键保存文件并退出 `vim`，效果如图所示。

> Esc键：一般位于键盘的左上角，不过在这里按完之后不会有明显的提示，您可以直接输入 :wq :wq：一定要带英文冒号！一定要带英文冒号！一定要带英文冒号！如果输入中文一般不会有反应。


### 配置参数

参数说明详见官方教程或详细操作指引。

### 重启游戏进程

配置文件修改并保存完成后，您还需要重新启动游戏进程或服务，以使得游戏配置生效。

#### Windows 服务器

1、重启服务器后即可生效（实例重启后，您部署的幻兽帕鲁将会随之自启动）。


#### Linux 服务器

1、使用如下命令重启服务，重启完成后即可生效。

```shell
sudo systemctl restart pal-server
```

2、使用如下命令检查服务是否正常启动，如出现图示的效果，则证明启动成功。

```shell
sudo systemctl status pal-server
```

## 进阶指南：内存优化（可选）

收到大量玩家反馈，开服后在进行一段时间的游戏后会出现内存不足的情况，这里为大家提供一些缓解内存不足的方案作参考：

1. 配置虚拟内存
2. 设置自动重启服务

### 为 Windows 服务器配置虚拟内存

本小节以 Windows Server 2022 为例，其他版本的 Windows 操作系统类似，可据此做参考。

1、打开服务器的控制面板。可以通过开始菜单或在搜索框内运行命令"control"来打开控制面板。

通过开始菜单
通过开始菜单

2、在控制面板中，选择"系统和安全"，然后选择"系统"。

选择系统和安全
选择系统和安全
选择系统
选择系统

3、在系统窗口中，下滑找到并单击"高级系统设置"。

单击高级系统设置
单击高级系统设置

4、在系统属性窗口中，切换到"高级"选项卡，并在"性能"部分点击【设置】按钮。


5、在性能选项窗口中，切换到"高级"选项卡，并在"虚拟内存"部分点击"更改"按钮。


6、在虚拟内存窗口中，首先取消选中"自动管理所有驱动器的分页文件大小"的复选框。然后，选择服务器上的一个驱动器，并选择"自定义大小"选项。


此处以8GB内存的服务器输入初始大小和最大值，再点击【设置】按钮后，单击【确定】。

1、初始大小：通常建议将初始大小设置为物理内存的1.5倍到2倍。例如当前服务器有8GB的物理内存，可以将初始大小设置为12GB到16GB。

2、最大大小：通常建议将最大大小设置为物理内存的2倍到4倍。例如当前服务器有8GB的物理内存，可以将最大大小设置为16GB到32GB。

1GB = 1000MB


7、此时，系统会弹出如下对话框，提示：要使改动生效，需要重新启动计算机，单击确认即可。


8、在性能选项、系统属性弹窗中依次单击【应用】、【确定】按钮。

性能选项弹窗：先应用，再确定！
系统属性弹窗：确定。



9、此时系统会弹出如下对话框，提醒“必须重新启动计算机才能应用这些更改”，建议您单击【立即重新启动】按钮。如不小心点击了稍后启动按钮，则手动重启Windows系统即可。

通过一键部署的幻兽帕鲁游戏进程拥有自启动机制，你无需担心重新启动计算机后游戏无法启动。


至此，你已成功为 Windows 服务器配置虚拟内存，可以一定程度上缓解由于游戏内存泄漏导致中断的问题。

### 为 Linux 服务器配置 Swap

Swap是计算机系统中的一种虚拟内存技术，它允许操作系统将部分内存中的数据暂时存储到硬盘上，以便为其他需要更多内存的任务提供空间。

第一步：检查当前的swap情况，如果你首次配置，运行这个命令将不会返回任何内容。

```shell
swapon --show
```

第二步：创建一个swap文件

命令里的“8G”是指创建一个大小为8GB的文件，这个文件可以用作swap空间，用于临时存储不适合放在内存中的数据。您可以根据需要调整大小。

对于 Linux 来说，建议您将该文件的大小设置为与系统内存一致，此处以8GB内存为例。

```shell
sudo fallocate -l 8G /swapfile
```

第三步：设置文件权限

```shell
sudo chmod 600 /swapfile
```

第四步：将文件格式化为swap格式

```shell
sudo mkswap /swapfile
```

第五步：启用swap文件

```shell
sudo swapon /swapfile
```

第六步：设置永久使用swap文件（系统在启动时自动启用swap文件）

```shell
sudo vim /etc/fstab
```

> 使用键盘方向键或j、k、h、l键浏览到文件的末尾。按下i进入编辑模式，光标将移动到文件的末尾，并将以下内容添加进文件：

```shell
/swapfile   none    swap    sw    0   0
```

按下 `Esc` 键退出编辑模式，并输入 `:wq` 并按下回车键保存文件并退出vim。


第七步：重新加载fstab文件

```shell
sudo swapon --all
```

第八步：验证swap设置是否成功

```shell
swapon --show
```

如出现下图内容，则说明设置成功。


当然，说了这么多，最佳实践可能还是升级服务器套餐配置啦。

## 为幻兽帕鲁服务器配置自动重启

由于游戏程序本身存在内存泄露的问题，因此在您进行一段时间的游戏后，也可以通过在服务器内重启游戏的方式来清理内存。

本小节将为您提供配置按照内存占用比例重启服务的脚本，您配置完成后，当服务器内存占用比例超过 90% 时，将自动为您重启游戏，以释放内存占用。

⚠️注意：

1、您需要使用前文一键部署的方式部署幻兽帕鲁，才能使用以下自动重启的教程。

2、当您再次登录游戏之后，游戏会回档 10 秒左右的时间。

### Linux 服务器

1、登录服务器，详细步骤可参考前文登录 Linux 服务器小节。

2、运行如下命令，监控内存占用并在占用比例达到 90% 时自动重启：

```shell
wget -O -   https://pal-server-1251810746.cos.accelerate.myqcloud.com/pal-server/Ubuntu/auto_restart_on_high_memory.sh   | sh
```

### Windows 服务器

1、登录服务器，详细步骤可参考前文登录 Windows 服务器小节。

2、在 Windows 的 PowerShell 运行如下命令，监控内存占用并在占用比例达到 90% 时自动重启：

```shell
iex (irm '  https://pal-server-1251810746.cos.accelerate.myqcloud.com/pal-server/Windows/auto_restart_on_high_memory.ps1  ')
```


## 常见问题

### 中国内地地域的服务器能否部署？

可以部署，但有可能遇到网络问题，建议您遇到因网络问题导致的失败时进行重试。

### 幻兽帕鲁服务器不定期会卡死怎么办？

通常情况下，该问题是由于服务器内存跑满导致，建议您定时运行以下命令，来重启游戏进程以解决问题：

```shell
sudo systemctl restart pal-server
```

### 如何查看服务器内存监控？

登录轻量应用服务器控制台，选中您部署了幻兽帕鲁的服务器，点击进入服务器详情页，即可在“实例监控”卡片中看到当前服务器内存的使用情况。

## 最后

篇幅原因，本教程并未覆盖所有部署方式和常用操作，以下列举了开发者社区内其他大佬编写的教程，作为补充：


* 幻兽帕鲁一键开私服？超简单的小白教程！
* 使用腾讯云自动化助手TAT一键部署，无需登录服务器即可完成。
* Docker 部署幻兽帕鲁
* 基于 Docker 环境一键部署幻兽帕鲁
* 使用腾讯云服务器CVM部署幻兽帕鲁
* 使用腾讯云CVM部署幻兽帕鲁。
* 幻兽帕鲁服务器存档备份
* 使用轻量对象存储备份游戏存档
* 设置游戏参数
* 手动配置游戏参数，搭建个性化幻兽帕鲁世界。